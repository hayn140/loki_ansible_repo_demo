---

- name: Add essential groups
  ansible.builtin.group:
    name: '{{ item.group }}'
    state: present
  when: ansible_distribution == "CentOS"
  loop:
    - '{{ group_names }}'

- name: Add all users
  ansible.builtin.user:
    name: '{{ item.user }}'
    state: present
    groups:
      - aloha
      - hawaii
    expires: -1
    password: '{{ item.password }}'
  loop:
    - '{{ user_names }}'
